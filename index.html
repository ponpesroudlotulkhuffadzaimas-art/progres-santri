<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Progres Santri</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f9;
    margin:0;
    padding:10px;
}
h2{text-align:center}
input,button{
    width:100%;
    padding:10px;
    margin:5px 0;
    font-size:16px;
}
button{
    background:#28a745;
    border:none;
    color:white;
    border-radius:5px;
}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
}
th,td{
    border:1px solid #ccc;
    padding:6px;
    font-size:14px;
    text-align:center;
}
th{
    background:#007bff;
    color:white;
}
</style>
</head>

<body>

<h2>ðŸ“Š Progres Santri</h2>

<form id="form">
    <input type="text" id="nama" placeholder="Nama Santri" required>
    <input type="text" id="kelas" placeholder="Kelas" required>
    <input type="text" id="hafalan" placeholder="Hafalan" required>
    <button type="submit">ðŸ’¾ Simpan Data</button>
</form>

<table>
<thead>
<tr>
    <th>No</th>
    <th>Nama</th>
    <th>Kelas</th>
    <th>Hafalan</th>
</tr>
</thead>
<tbody id="data"></tbody>
</table>

<script>
// GANTI DENGAN URL APPS SCRIPT ANDA
const API = "https://script.google.com/macros/s/AKfycbxMAnqlTJlKF_42jAPFw8hqXUx6rHPGA_wOWY3X9dE--00Al1R91SwQyIrOEOSB5gd3/exec";

// Ambil Data
async function loadData(){
    try{
        const res = await fetch(API);
        const data = await res.json();

        let html = "";
        data.forEach((row,i)=>{
            html += `<tr>
                <td>${i+1}</td>
                <td>${row.nama}</td>
                <td>${row.kelas}</td>
                <td>${row.hafalan}</td>
            </tr>`;
        });

        document.getElementById("data").innerHTML = html;

    }catch(e){
        alert("Gagal mengambil data");
        console.log(e);
    }
}

// Simpan Data
document.getElementById("form").addEventListener("submit", async function(e){
    e.preventDefault();

    let formData = new FormData();
    formData.append("action","add");
    formData.append("nama",nama.value);
    formData.append("kelas",kelas.value);
    formData.append("hafalan",hafalan.value);

    try{
        const res = await fetch(API,{
            method:"POST",
            body:formData
        });

        const result = await res.json();

        if(result.status=="OK"){
            alert("Data berhasil disimpan");
            form.reset();
            loadData();
        }else{
            alert("Gagal menyimpan data");
        }

    }catch(e){
        alert("Error kirim data");
        console.log(e);
    }
});

loadData();
</script>

</body>
</html>
